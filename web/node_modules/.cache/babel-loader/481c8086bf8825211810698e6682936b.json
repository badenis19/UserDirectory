{"ast":null,"code":"import _regeneratorRuntime from \"/Users/warren/code/badenis19/UserDirectory/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/warren/code/badenis19/UserDirectory/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/warren/code/badenis19/UserDirectory/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/warren/code/badenis19/UserDirectory/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/warren/code/badenis19/UserDirectory/web/src/app/index.jsx\";\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  flex-grow: 1;\\n\\n  & > *:not(:first-child){\\n    margin-top: 1rem;\\n  }\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n    flex-direction: row;\\n\\n    & > *:not(:last-child){\\n      margin-right: 2rem;\\n    }\\n  \"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-between;\\n  align-items: stretch;\\n\\n  & > *:not(:last-child){\\n    margin-bottom: 2rem;\\n  }\\n\\n  \", \"\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Fragment, useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { apiEndPoint } from 'config/apiConfig';\nimport { placeHttpRequest } from 'util/httpRequest';\nimport { resolveMessage } from 'util/resolveMessage';\nimport { media } from 'ux/media';\nimport GlobalStyle from 'ux/globalStyle';\nimport Header from './components/Header';\nimport Footer from './components/Footer';\nimport Form from './components/Form';\nimport UserList from './components/UserList';\nimport Button from './components/Button';\nvar Grid = styled.div(_templateObject(), media.tabletUp(_templateObject2()));\nvar ListWrapper = styled.div(_templateObject3());\n\nvar App = function App() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      users = _useState2[0],\n      setUsers = _useState2[1];\n\n  var _useState3 = useState(1),\n      _useState4 = _slicedToArray(_useState3, 2),\n      currentPageNumber = _useState4[0],\n      setPageNumber = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currentHasPreviousPage = _useState6[0],\n      setHasPreviousPage = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      currentHasNextPage = _useState8[0],\n      setHasNextPage = _useState8[1];\n\n  var loadUsers =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var pageNumber,\n          _ref2,\n          users,\n          page,\n          hasPreviousPage,\n          hasNextPage,\n          _args = arguments;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              pageNumber = _args.length > 0 && _args[0] !== undefined ? _args[0] : 1;\n              _context.next = 3;\n              return placeHttpRequest(\"\".concat(apiEndPoint, \"/users?page=\").concat(pageNumber), 'get', {}, fetch);\n\n            case 3:\n              _ref2 = _context.sent;\n              users = _ref2.users;\n              page = _ref2.page;\n              hasPreviousPage = _ref2.hasPreviousPage;\n              hasNextPage = _ref2.hasNextPage;\n              setUsers(users);\n              setPageNumber(page);\n              setHasNextPage(hasNextPage);\n              setHasPreviousPage(hasPreviousPage);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    return function loadUsers() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var registerUser =\n  /*#__PURE__*/\n  function () {\n    var _ref4 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(_ref3) {\n      var email,\n          password,\n          onResponseMessageReceived,\n          responseMessages,\n          _args2 = arguments;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              email = _ref3.email, password = _ref3.password;\n              onResponseMessageReceived = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : function () {};\n\n              if (!(!email || !password)) {\n                _context2.next = 4;\n                break;\n              }\n\n              return _context2.abrupt(\"return\");\n\n            case 4:\n              _context2.prev = 4;\n              _context2.next = 7;\n              return placeHttpRequest(\"\".concat(apiEndPoint, \"/users\"), 'post', {\n                email: email,\n                password: password\n              }, fetch);\n\n            case 7:\n              _context2.next = 9;\n              return loadUsers();\n\n            case 9:\n              _context2.next = 15;\n              break;\n\n            case 11:\n              _context2.prev = 11;\n              _context2.t0 = _context2[\"catch\"](4);\n              responseMessages = _context2.t0.responseMessages;\n              onResponseMessageReceived(responseMessages.map(resolveMessage));\n\n            case 15:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this, [[4, 11]]);\n    }));\n\n    return function registerUser(_x) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    loadUsers();\n  }, []);\n  console.log(users);\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(GlobalStyle, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }), React.createElement(Header, {\n    heading: \"WorldRemit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }), React.createElement(Grid, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(Form, {\n    heading: \"Enter your details here\",\n    saveForm: registerUser,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }), React.createElement(ListWrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(UserList, {\n    users: users,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }), React.createElement(Button, {\n    onClick: function onClick() {\n      return loadUsers(currentPageNumber - 1);\n    },\n    disabled: !currentHasPreviousPage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \"Previous\"), React.createElement(Button, {\n    onClick: function onClick() {\n      return loadUsers(currentPageNumber + 1);\n    },\n    disabled: !currentHasNextPage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"Next\"))), React.createElement(Footer, {\n    text: \"WorldRemit tech task \".concat(new Date().getFullYear()),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/warren/code/badenis19/UserDirectory/web/src/app/index.jsx"],"names":["React","Fragment","useState","useEffect","styled","apiEndPoint","placeHttpRequest","resolveMessage","media","GlobalStyle","Header","Footer","Form","UserList","Button","Grid","div","tabletUp","ListWrapper","App","users","setUsers","currentPageNumber","setPageNumber","currentHasPreviousPage","setHasPreviousPage","currentHasNextPage","setHasNextPage","loadUsers","pageNumber","fetch","page","hasPreviousPage","hasNextPage","registerUser","email","password","onResponseMessageReceived","responseMessages","map","console","log","Date","getFullYear"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from 'react'\nimport styled from 'styled-components'\nimport { apiEndPoint } from 'config/apiConfig'\nimport { placeHttpRequest } from 'util/httpRequest'\nimport { resolveMessage } from 'util/resolveMessage'\nimport { media } from 'ux/media'\nimport GlobalStyle from 'ux/globalStyle'\nimport Header from './components/Header'\nimport Footer from './components/Footer'\nimport Form from './components/Form'\nimport UserList from './components/UserList'\nimport Button from './components/Button'\n\nconst Grid = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: stretch;\n\n  & > *:not(:last-child){\n    margin-bottom: 2rem;\n  }\n\n  ${media.tabletUp`\n    flex-direction: row;\n\n    & > *:not(:last-child){\n      margin-right: 2rem;\n    }\n  `}\n`\n\nconst ListWrapper = styled.div`\n  flex-grow: 1;\n\n  & > *:not(:first-child){\n    margin-top: 1rem;\n  }\n`\n\nconst App = () => {\n\n  const [users, setUsers] = useState([])\n\n  const [currentPageNumber, setPageNumber] = useState(1)\n  const [currentHasPreviousPage, setHasPreviousPage] = useState(false)\n  const [currentHasNextPage, setHasNextPage] = useState(false)\n\n  const loadUsers = async (pageNumber = 1) => {\n    const { users, page, hasPreviousPage, hasNextPage }\n    = await placeHttpRequest(`${apiEndPoint}/users?page=${pageNumber}`, 'get', {}, fetch)\n\n    setUsers(users)\n    setPageNumber(page)\n    setHasNextPage(hasNextPage)\n    setHasPreviousPage(hasPreviousPage)\n  }\n\n  const registerUser = async ({ email, password }, onResponseMessageReceived = () => { }) => {\n    if (!email || !password)\n      return\n    try {\n      await placeHttpRequest(`${apiEndPoint}/users`, 'post', { email, password }, fetch)\n\n      await loadUsers()\n    }\n    catch ({ responseMessages }) {\n      onResponseMessageReceived(responseMessages.map(resolveMessage))\n    }\n  }\n\n  useEffect(() => {\n    loadUsers()\n  }, [])\n\n  console.log(users);\n  return (\n    <Fragment>\n      <GlobalStyle />\n      <Header heading='WorldRemit' />\n      <Grid>\n        <Form heading=\"Enter your details here\" saveForm={registerUser} />\n        <ListWrapper>\n          <UserList users={users} />\n          <Button\n            onClick={() => loadUsers(currentPageNumber - 1)}\n            disabled={!currentHasPreviousPage}>\n            Previous\n          </Button>\n          <Button\n            onClick={() => loadUsers(currentPageNumber + 1)}\n            disabled={!currentHasNextPage}>\n            Next\n          </Button>\n        </ListWrapper>\n      </Grid>\n      <Footer text={`WorldRemit tech task ${new Date().getFullYear()}`} />\n    </Fragment>\n  )\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}